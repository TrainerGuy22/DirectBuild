apply plugin: 'groovy'
apply plugin: 'build-dashboard'
apply plugin: 'codenarc'

version = "0.2-SNAPSHOT"

ext {
   groovyVersion = '2.1.9:indy'
}

repositories {
   mavenCentral()

   maven {
      url 'https://oss.sonatype.org/content/repositories/snapshots/'
   }
}

dependencies {
   compile "org.codehaus.groovy:groovy-all:${ext.groovyVersion}"
   compile 'io.vertx:vertx-core:2.0.2-final'
   compile 'io.vertx:lang-groovy:2.0.0-final'
   compile 'org.mozilla:rhino:1.7R4'
   compile 'com.directmyfile:NanoBot:0.5.2-SNAPSHOT'
   compile 'mysql:mysql-connector-java:5.1.26'
   testCompile 'junit:junit:4.11'
   testCompile "org.codehaus.groovy:groovy-all:${ext.groovyVersion}"
}

tasks.withType(GroovyCompile) {
    groovyOptions.optimizationOptions.indy = true
}

jar {
   manifest {
      attributes('Main-class': 'com.directmyfile.ci.Main')
   }

   from configurations.compile.collect { it.isDirectory() ? it : zipTree(it) }
}
